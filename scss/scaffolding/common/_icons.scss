/*
 * Functions for returning SVG icons as background images
 */

//  Function to create an optimized svg url
//  http://codepen.io/jakob-e/pen/doMoML
@function svg-url($svg){
  //  Chunk up string in order to avoid "stack level too deep" error
  $encoded:'';
  $slice: 2000;
  $index: 0;
  $loops: ceil(str-length($svg)/$slice);
  @for $i from 1 through $loops {
    $chunk: str-slice($svg, $index, $index + $slice - 1);
    //
    //   Encode (may need a few extra replacements)
    //
    $chunk: str-replace($chunk,'"','\'');
    $chunk: str-replace($chunk,'<','%3C');
    $chunk: str-replace($chunk,'>','%3E');
    $chunk: str-replace($chunk,'&','%26');
    $chunk: str-replace($chunk,'#','%23');
    $encoded: #{$encoded}#{$chunk};
    $index: $index + $slice;
  }
  @return url("data:image/svg+xml;charset=utf8,#{$encoded}");
}


//  Helper function to replace characters in a string
@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);
  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }
  @return $string;
}

@function icon($icon, $color) {

  $svg: '';

  @if ($icon == 'close') {

    $svg: '<?xml version="1.0" encoding="UTF-8"?><svg width="57px" height="57px" viewBox="0 0 57 57" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="desktop" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="square"><g id="contact-form" transform="translate(-865.000000, -33.000000)" stroke="' + $color + '" stroke-width="2"><g id="Group-2" transform="translate(867.000000, 35.000000)"><path d="M52.744928,0 L0,52.744928" id="Line"></path><path d="M52.744928,52.744928 L0,0" id="Line"></path></g></g></g></svg>';

  } @elseif ($icon == 'facebook') {

    $svg: '<svg width="8px" height="16px" viewBox="0 0 8 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="facebook" fill="' + $color + '"><path d="M6.898,7.729 L4.734,7.729 L4.734,15.449 L1.525,15.449 L1.525,7.729 L0,7.729 L0,5.004 L1.525,5.004 L1.525,3.238 C1.525,1.974 2.125,0 4.763,0 L7.138,0.01 L7.138,2.657 L5.414,2.657 C5.132,2.657 4.734,2.797 4.734,3.398 L4.734,5.005 L7.179,5.005 L6.898,7.729 Z" id="Path"></path></g></g></svg>';

  } @elseif ($icon == 'linkedin') {

      $svg: '<svg width="13px" height="13px" viewBox="0 0 13 13" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="linkedin" fill="' + $color + '"><path d="M12.714,12.151 L9.989,12.151 L9.989,7.765 C9.989,6.664 9.596,5.91 8.609,5.91 C7.857,5.91 7.408,6.421 7.21,6.909 C7.139,7.085 7.12,7.327 7.12,7.572 L7.12,12.152 L4.396,12.152 C4.396,12.152 4.432,4.724 4.396,3.955 L7.12,3.955 L7.12,5.115 C7.484,4.556 8.132,3.762 9.576,3.762 C11.369,3.762 12.714,4.934 12.714,7.451 L12.714,12.151 Z" id="Path"></path><path d="M1.524,2.835 L1.507,2.835 C0.591,2.835 0,2.204 0,1.419 C0,0.613 0.61,0 1.542,0 C2.475,0 3.049,0.613 3.066,1.419 C3.066,2.204 2.475,2.835 1.524,2.835 L1.524,2.835 Z" id="Path"></path><polygon id="Path" points="0.162 12.152 2.888 12.152 2.888 3.955 0.162 3.955"></polygon></g></g></svg>';

  } @elseif ($icon == 'instagram') {

    $svg: '<svg width="15px" height="14px" viewBox="0 0 15 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="instagram" fill="' + $color +'"><path d="M14.0443823,5.54669811 L14.0443823,11.0567017 C14.0443823,12.4902663 12.8767354,13.656464 11.4431708,13.656464 L3.18740374,13.656464 C1.75347685,13.656464 0.58691682,12.4902663 0.58691682,11.0567017 L0.58691682,5.54669811 L0.58691682,2.79984775 C0.58691682,1.36592086 1.75347685,0.200085406 3.18740374,0.200085406 L11.4431708,0.200085406 C12.8767354,0.200085406 14.0443823,1.36592086 14.0443823,2.79984775 L14.0443823,5.54669811 Z M7.31593938,9.29657271 C8.62161713,9.29657271 9.68456344,8.2336264 9.68456344,6.92794865 C9.68456344,6.41277836 9.51646286,5.93528577 9.23569143,5.54655319 C8.80602056,4.95095546 8.10535997,4.55896231 7.31593938,4.55896231 C6.52470736,4.55896231 5.82658277,4.95095546 5.39546276,5.54655319 C5.11432904,5.93528577 4.94731533,6.41277836 4.94731533,6.92794865 C4.94731533,8.2336264 6.00953706,9.29657271 7.31593938,9.29657271 Z M7.31604807,10.6080108 C5.28652345,10.6080108 3.63703655,8.95671247 3.63703655,6.92791243 C3.63703655,6.4388267 3.73412912,5.97401412 3.90693941,5.54651696 L1.89842737,5.54651696 L1.89842737,11.0565205 C1.89842737,11.7673251 2.47627309,12.3455331 3.18743997,12.3455331 L11.443207,12.3455331 C12.1540116,12.3455331 12.7322196,11.7673251 12.7322196,11.0565205 L12.7322196,5.54651696 L10.7226207,5.54651696 C10.8968802,5.97401412 10.9946973,6.43955127 10.9946973,6.92791243 C10.9946973,8.95671247 9.34448583,10.6080108 7.31604807,10.6080108 Z M12.4866261,4.0307135 L12.4866261,2.04575002 L12.4866261,1.74976259 L12.1899141,1.75048716 L10.2056752,1.75737059 L10.2136455,4.03795921 L12.4866261,4.0307135 Z" id="Combined-Shape"></path></g></g></svg>';

  } @elseif ($icon == 'menu') {

    $svg: '<svg width="31px" height="22px" viewBox="0 0 31 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="mobile" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="square"><g id="iPhone-7" transform="translate(-313.000000, -32.000000)" stroke="' + $color + '" stroke-width="2"><g id="hamburger" transform="translate(314.000000, 32.000000)"><path d="M0.5,1 L28.5,1" id="Line"></path><path d="M0.5,11 L28.5,11" id="Line"></path><path d="M0.5,21 L28.5,21" id="Line"></path></g></g></g></svg>';

  } @elseif ($icon == 'paper-airplane') {

    $svg: '<svg width="17px" height="16px" viewBox="0 0 17 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M15.8344617,0.664381378 C16.0203682,0.799586135 16.0964198,0.979856441 16.0626186,1.2051977 L13.8993533,14.1847895 C13.8711856,14.348162 13.7810505,14.4749145 13.6289451,14.565051 C13.5500757,14.6101193 13.4627572,14.6326531 13.3669872,14.6326531 C13.3050184,14.6326531 13.237417,14.6185694 13.1641811,14.5904018 L9.33621552,13.0271046 L7.29125378,15.5199298 C7.18985021,15.6495011 7.05183076,15.7142857 6.87719128,15.7142857 C6.80395537,15.7142857 6.74198745,15.7030188 6.69128567,15.6804847 C6.58424857,15.64105 6.4983385,15.574857 6.43355289,15.4819037 C6.36876728,15.3889504 6.33637496,15.28614 6.33637496,15.1734694 L6.33637496,12.2243304 L13.6373954,3.2755102 L4.60407266,11.0919962 L1.26622189,9.72305485 C1.05778123,9.6441854 0.945112285,9.48926561 0.928211691,9.25829082 C0.916944628,9.03294955 1.00707978,8.86676287 1.19861985,8.75972577 L15.2598443,0.647480867 C15.3443473,0.596779083 15.4344825,0.571428571 15.5302525,0.571428571 C15.6429231,0.571428571 15.7443252,0.60241253 15.8344617,0.664381378 Z" id="paper-airplane" fill="' + $color + '"></path></g></svg>';

  } @elseif ($icon == 'yelp') {

    $svg: '<svg width="13px" height="17px" viewBox="0 0 13 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M6.25865716,12.0088895 L6.25865716,13.1645892 C6.25259046,14.9360641 6.23439065,15.8612213 6.20405717,15.9400883 C6.13125683,16.1342226 5.97655842,16.2555547 5.73995731,16.3040882 C5.41235577,16.3586885 4.86181144,16.243423 4.0883078,15.9582883 C3.31480416,15.6731536 2.82189257,15.4031898 2.60955824,15.1483886 C2.5306912,15.0573881 2.47912507,14.9481893 2.45485829,14.8207887 C2.44879159,14.7479883 2.4609248,14.6691225 2.49125828,14.5841887 C2.51552506,14.5235218 2.61865733,14.3809566 2.80065818,14.1564889 C2.98265904,13.9320211 3.53168672,13.2768279 4.44775769,12.1908894 C4.45382439,12.1908894 4.63582251,11.9785583 4.99375753,11.5538896 C5.08475796,11.4386224 5.20457339,11.3643065 5.35320742,11.3309397 C5.50184146,11.2975729 5.65198991,11.3081894 5.80365729,11.3627897 C5.94925798,11.4234566 6.0630068,11.5114224 6.14490719,11.6266896 C6.22680757,11.7419568 6.26472385,11.8693555 6.25865716,12.0088895 Z M4.90275756,9.72479017 C4.88455747,10.0584584 4.72682576,10.2707896 4.4295577,10.36179 L3.33755802,10.7166899 C1.66921684,11.2505591 0.783492632,11.5174896 0.680358813,11.5174896 C0.468024481,11.5053563 0.304226168,11.3961574 0.188958959,11.1898897 C0.116158617,11.0382224 0.0645924814,10.8107247 0.0342590054,10.5073899 C-0.0142745562,10.0463211 -0.0112412541,9.54127631 0.0433590027,8.99224039 C0.0979592595,8.44320448 0.188958322,8.06555836 0.316358922,7.85929073 C0.443759521,7.65302309 0.613624438,7.55595742 0.82595877,7.56809081 C0.904825808,7.56809081 1.51755283,7.80165508 2.66415822,8.26879061 C3.09489358,8.44472477 3.44372332,8.58728997 3.71065791,8.69649048 L4.47505769,9.00589039 C4.61459168,9.06049064 4.7222739,9.15300636 4.79810759,9.2834403 C4.87394128,9.41387425 4.90882425,9.5609894 4.90275756,9.72479017 Z M12.4193553,12.4274894 C12.3768885,12.7550909 12.0993413,13.2434525 11.5867056,13.8925889 C11.0740698,14.5417253 10.6630574,14.9269547 10.3536559,15.0482886 C10.1291882,15.1332223 9.93809018,15.1119892 9.78035611,14.9845886 C9.69542238,14.9239217 9.13729479,14.053364 8.10595661,12.3728894 L7.67825673,11.6721896 C7.593323,11.544789 7.55844003,11.4052571 7.57360676,11.2535897 C7.5887735,11.1019223 7.64792289,10.9623904 7.75105671,10.8349898 C7.96339104,10.5741219 8.21515512,10.4952561 8.50635649,10.5983899 C8.51242318,10.6044566 8.87338613,10.7257887 9.58925617,10.9623898 C10.8207953,11.3627917 11.5548544,11.6039392 11.7914555,11.6858396 C12.0280566,11.76774 12.1706218,11.8299227 12.2191554,11.8723895 C12.3890228,12.0058568 12.4557555,12.1908883 12.4193553,12.4274894 Z M6.30415714,6.67629108 C6.33449062,7.29509399 6.1706923,7.66515685 5.81275729,7.78649075 C5.46088897,7.88962457 5.11509253,7.67426012 4.7753576,7.14039094 L1.33555862,1.69859256 C1.28702506,1.48625823 1.3446578,1.2981935 1.50845857,1.13439273 C1.75719307,0.873524833 2.38660326,0.602044295 3.39670801,0.319942968 C4.40681276,0.0378416418 5.08778908,-0.0577073743 5.4396574,0.0332930537 C5.68232521,0.0939600057 5.83095701,0.2304586 5.88555727,0.442792932 C5.90375735,0.551993446 5.97049,1.47866724 6.08575721,3.22284211 C6.20102442,4.96701697 6.27382367,6.11815512 6.30415714,6.67629108 Z M12.3283554,7.65909079 C12.3465554,7.8956919 12.2676896,8.07465672 12.0917554,8.19599063 C12.000755,8.25665758 11.0027986,8.51752156 9.09785631,8.9785904 C8.69138773,9.06959082 8.41535724,9.13935677 8.26975656,9.18789033 L8.27885656,9.16969034 C8.13932257,9.20609051 7.99979067,9.1939573 7.86025668,9.13329035 C7.72072269,9.0726234 7.60849051,8.97555773 7.52355678,8.84209044 C7.34155592,8.55695576 7.34155592,8.29305848 7.52355678,8.05039067 C7.52962347,8.04432398 7.75712113,7.73492716 8.20605658,7.12219095 C8.96439348,6.08478607 9.41938879,5.46599244 9.57105617,5.2657915 C9.72272355,5.06559056 9.82585582,4.94729178 9.88045608,4.9108916 C10.0503235,4.7956244 10.2474882,4.78955779 10.4719559,4.89269161 C10.7631573,5.0322256 11.1362534,5.43717143 11.5912556,6.10754125 C12.0462577,6.77791107 12.2919552,7.28598917 12.3283554,7.6317908 L12.3283554,7.65909079 Z" id="yelp" fill="' + $color + '"></path></g></svg>';
  }

  @if ($svg != '') {
    @return svg-url($svg);
  } @else {
    @return none;
  }
}
